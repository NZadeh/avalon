<template name="gameRoomPage">
    <div class="container">
        {{#if open}}
            <div class="row">
                <div class="col s12">
                    <h3>{{title}}</h3>

                    <div class="flow-text">
                        Room password:
                        {{#if password}}
                            {{password}}
                        {{else}}
                            <i>none</i>
                        {{/if}}
                    </div>

                    <div class="flow-text">
                        Max # players: {{maxPlayers}}
                    </div>
                </div>
                <div class="col s12 flow-text">
                    <h3>Players</h3>
                    <ul class="list-group">
                        <li class="list-group-item">
                            {{author}}
                            <span style="float: right" class="glyphicon glyphicon-king" aria-hidden="true"></span>
                        </li>
                        {{#each normalPlayers}}
                            <li class="list-group-item">
                                {{username}}
                            </li>
                        {{/each}}
                    </ul>
                </div>
            </div>
            {{#if isRoomOwner}}
                <div class="row">
                    <div class="col s12">
                        <a href="#" style="width: 100%" class="start btn btn-primary">
                            Start game
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12">
                        <a href="#" style="width: 100%"
                        class="delete btn btn-primary red accent-2">
                            Delete room
                        </a>
                    </div>
                </div>
            {{else}}
                <div class="row">
                    <div class="col s12">
                        <a href="#" style="width: 100%" class="start btn btn-primary disabled">
                            Waiting for owner
                        </a>
                    </div>
                </div>
            {{/if}}
        {{else}}
            {{> gameTemplate}}
        {{/if}}
    </div>

    <script>
    window.addEventListener('beforeunload', function() {
        Meteor.call('leaveRoom');
    });
    </script>
</template>